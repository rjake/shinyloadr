---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# shinyloadr

<!-- badges: start -->
<!-- badges: end -->

Troubleshooting reactive data in a flexdashboard can be difficult. The goal of this package is to convert reactive data frames into functions that will read from your raw data and become available in your global environment. The main function will also recommended that you put a dummy `input` list in your Rmd to simulate the reactive inputs. You can learn more about a dummy input list in [this vignette](https://rjake.github.io/shinyloadr/articles/tips-and-tricks.html).


## Installation
<!--  
  You can install the released version of `shinyloadr` from [CRAN](https://CRAN.R-project.org) with:
  
  ``` r
  install.packages("shinyloadr")
  ```

-->

You can install the development version from [GitHub](https://github.com/rjake/shinyloadr) with:

``` r
# install.packages("devtools")
devtools::install_github("rjake/shinyloadr")
```
## Example

There is a dummy flexdashboard available when the package is installed for you to see how this works. 

```{r example, eval = FALSE}
library(shinyloadr)

system.file(package = "shinyloadr", "Rmd/test_dashboard_no_inputs.Rmd") %>% 
 load_reactive_objects()
```

This will result in the following output
```{r echo=FALSE, eval=TRUE, comment=""}
print(glue::glue('Here are the inputs you have listed:

  input_name  times_used  lines  missing
1      displ           1     45     TRUE
2       year           2  48,49     TRUE


Add this code chunk to your Rmd:
```{{r input_demo, eval = FALSE}}
input <- list(
  displ = "",
  year = ""
)
', '```

WARNING: This next step will load all object assignments into your global environment.
Do you want to continue? 

1: Yes
2: No
'))
```

Hitting `1` will then update your global environment with all raw data and assignments, your dummy `input` list, and all reactive objects converted to functions.

There are additional arguments you can use to resart R or to clear the environment. The `keep` and `remove` arguments take regular expressions as a pattern match. To get an exact match, use the `^` and `$` to signify the beginning and end (ex. `^your_text$`). To list objects, separate them with a `|`. as shown below.

```{r, eval = FALSE}
load_reactive_objects(
  ...,
  clear_environment = TRUE, 
  keep = "test_|^df$|raw_data", # objects to keep
  remove = "input"              # objects to remove 
)
```
